#include <iostream>
#include <queue>
using namespace std;
int main(){
    queue<int> q;
    int ch,x;
    while(cin>>ch){
        if(ch==1){ cin>>x; q.push(x); int sz=(int)q.size(); for(int i=0;i<sz-1;i++){ q.push(q.front()); q.pop(); } }
        else if(ch==2){ if(q.empty()) cout<<-1<<"\n"; else{ cout<<q.front()<<"\n"; q.pop(); } }
        else if(ch==3){ if(q.empty()) cout<<-1<<"\n"; else cout<<q.front()<<"\n"; }
        else break;
    }
    return 0;
}
